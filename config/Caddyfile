{
	debug
	log {
		level DEBUG
		format console
		output file log/caddy.log
	}
}
localhost {
	root * ./web
	@notStatic {
		header X-Caddy-Origin-Host *
	}
	route {
		reverse_proxy @notStatic {http.request.header.X-Caddy-Origin-Schema}{http.request.header.X-Caddy-Origin-Host}{http.request.header.X-Caddy-Origin-Port} {
			transport http {
				tls
			}
			header_up -X-Caddy-Origin-Host
			header_up -X-Caddy-Origin-Port
			header_up -X-Caddy-Origin-Schema

			header_up Host {http.request.header.X-Caddy-Origin-Host}
			header_down -X-Caddy-Origin-Host
			header_down -X-Caddy-Origin-Port
			header_down -X-Caddy-Origin-Schema
			header_down Host {http.request.header.X-Caddy-Origin-Host}
		}
		try_files {path} /index.html
		file_server
	}
}
